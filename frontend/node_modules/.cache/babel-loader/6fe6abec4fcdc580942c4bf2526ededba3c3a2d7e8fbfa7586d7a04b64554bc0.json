{"ast":null,"code":"import { toast } from 'react-toastify';\n\n/**\r\n * Centralized error handler for API responses\r\n */\nexport const handleApiError = error => {\n  // Network error\n  if (!error.response) {\n    toast.error('Network error. Please check your connection.');\n    return {\n      message: 'Network error',\n      status: 0\n    };\n  }\n  const {\n    status,\n    data\n  } = error.response;\n\n  // Backend error response format\n  const errorResponse = {\n    message: (data === null || data === void 0 ? void 0 : data.message) || getDefaultMessage(status),\n    status: status,\n    timestamp: (data === null || data === void 0 ? void 0 : data.timestamp) || new Date().toISOString(),\n    details: (data === null || data === void 0 ? void 0 : data.details) || null\n  };\n\n  // Show toast based on error type\n  switch (status) {\n    case 400:\n      toast.error(errorResponse.message);\n      break;\n    case 401:\n      toast.warning('Please login to continue');\n      break;\n    case 403:\n      toast.error('You do not have permission to perform this action');\n      break;\n    case 404:\n      toast.error(errorResponse.message || 'Resource not found');\n      break;\n    case 409:\n      toast.error(errorResponse.message || 'Conflict occurred');\n      break;\n    case 422:\n      // Validation errors\n      if (data !== null && data !== void 0 && data.errors) {\n        Object.values(data.errors).forEach(msg => toast.error(msg));\n      } else {\n        toast.error(errorResponse.message);\n      }\n      break;\n    case 500:\n      toast.error('Server error. Please try again later.');\n      break;\n    default:\n      toast.error(errorResponse.message);\n  }\n  return errorResponse;\n};\n\n/**\r\n * Get default error message based on status code\r\n */\nconst getDefaultMessage = status => {\n  const messages = {\n    400: 'Bad request',\n    401: 'Unauthorized',\n    403: 'Forbidden',\n    404: 'Not found',\n    409: 'Conflict',\n    422: 'Validation error',\n    500: 'Internal server error'\n  };\n  return messages[status] || 'An error occurred';\n};\n\n/**\r\n * Extract validation errors from response\r\n */\nexport const getValidationErrors = error => {\n  var _error$response, _error$response2, _error$response2$data;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 422 && (_error$response2 = error.response) !== null && _error$response2 !== void 0 && (_error$response2$data = _error$response2.data) !== null && _error$response2$data !== void 0 && _error$response2$data.errors) {\n    return error.response.data.errors;\n  }\n  return {};\n};\n\n/**\r\n * Format date for display\r\n */\nexport const formatDate = dateString => {\n  if (!dateString) return 'N/A';\n  return new Date(dateString).toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};\n\n/**\r\n * Format date with time\r\n */\nexport const formatDateTime = dateString => {\n  if (!dateString) return 'N/A';\n  return new Date(dateString).toLocaleString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric',\n    hour: '2-digit',\n    minute: '2-digit'\n  });\n};\n\n/**\r\n * Check if a date is overdue\r\n */\nexport const isOverdue = dueDate => {\n  if (!dueDate) return false;\n  return new Date(dueDate) < new Date();\n};\n\n/**\r\n * Calculate days until due\r\n */\nexport const daysUntilDue = dueDate => {\n  if (!dueDate) return null;\n  const now = new Date();\n  const due = new Date(dueDate);\n  const diffTime = due - now;\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n};","map":{"version":3,"names":["toast","handleApiError","error","response","message","status","data","errorResponse","getDefaultMessage","timestamp","Date","toISOString","details","warning","errors","Object","values","forEach","msg","messages","getValidationErrors","_error$response","_error$response2","_error$response2$data","formatDate","dateString","toLocaleDateString","year","month","day","formatDateTime","toLocaleString","hour","minute","isOverdue","dueDate","daysUntilDue","now","due","diffTime","Math","ceil"],"sources":["C:/STUDY/webapp/Library-Management-ITITIU22124/frontend/src/utils/errorHandler.js"],"sourcesContent":["import { toast } from 'react-toastify';\r\n\r\n/**\r\n * Centralized error handler for API responses\r\n */\r\nexport const handleApiError = (error) => {\r\n  // Network error\r\n  if (!error.response) {\r\n    toast.error('Network error. Please check your connection.');\r\n    return {\r\n      message: 'Network error',\r\n      status: 0,\r\n    };\r\n  }\r\n\r\n  const { status, data } = error.response;\r\n\r\n  // Backend error response format\r\n  const errorResponse = {\r\n    message: data?.message || getDefaultMessage(status),\r\n    status: status,\r\n    timestamp: data?.timestamp || new Date().toISOString(),\r\n    details: data?.details || null,\r\n  };\r\n\r\n  // Show toast based on error type\r\n  switch (status) {\r\n    case 400:\r\n      toast.error(errorResponse.message);\r\n      break;\r\n    case 401:\r\n      toast.warning('Please login to continue');\r\n      break;\r\n    case 403:\r\n      toast.error('You do not have permission to perform this action');\r\n      break;\r\n    case 404:\r\n      toast.error(errorResponse.message || 'Resource not found');\r\n      break;\r\n    case 409:\r\n      toast.error(errorResponse.message || 'Conflict occurred');\r\n      break;\r\n    case 422:\r\n      // Validation errors\r\n      if (data?.errors) {\r\n        Object.values(data.errors).forEach((msg) => toast.error(msg));\r\n      } else {\r\n        toast.error(errorResponse.message);\r\n      }\r\n      break;\r\n    case 500:\r\n      toast.error('Server error. Please try again later.');\r\n      break;\r\n    default:\r\n      toast.error(errorResponse.message);\r\n  }\r\n\r\n  return errorResponse;\r\n};\r\n\r\n/**\r\n * Get default error message based on status code\r\n */\r\nconst getDefaultMessage = (status) => {\r\n  const messages = {\r\n    400: 'Bad request',\r\n    401: 'Unauthorized',\r\n    403: 'Forbidden',\r\n    404: 'Not found',\r\n    409: 'Conflict',\r\n    422: 'Validation error',\r\n    500: 'Internal server error',\r\n  };\r\n  return messages[status] || 'An error occurred';\r\n};\r\n\r\n/**\r\n * Extract validation errors from response\r\n */\r\nexport const getValidationErrors = (error) => {\r\n  if (error.response?.status === 422 && error.response?.data?.errors) {\r\n    return error.response.data.errors;\r\n  }\r\n  return {};\r\n};\r\n\r\n/**\r\n * Format date for display\r\n */\r\nexport const formatDate = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  return new Date(dateString).toLocaleDateString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n  });\r\n};\r\n\r\n/**\r\n * Format date with time\r\n */\r\nexport const formatDateTime = (dateString) => {\r\n  if (!dateString) return 'N/A';\r\n  return new Date(dateString).toLocaleString('en-US', {\r\n    year: 'numeric',\r\n    month: 'short',\r\n    day: 'numeric',\r\n    hour: '2-digit',\r\n    minute: '2-digit',\r\n  });\r\n};\r\n\r\n/**\r\n * Check if a date is overdue\r\n */\r\nexport const isOverdue = (dueDate) => {\r\n  if (!dueDate) return false;\r\n  return new Date(dueDate) < new Date();\r\n};\r\n\r\n/**\r\n * Calculate days until due\r\n */\r\nexport const daysUntilDue = (dueDate) => {\r\n  if (!dueDate) return null;\r\n  const now = new Date();\r\n  const due = new Date(dueDate);\r\n  const diffTime = due - now;\r\n  return Math.ceil(diffTime / (1000 * 60 * 60 * 24));\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
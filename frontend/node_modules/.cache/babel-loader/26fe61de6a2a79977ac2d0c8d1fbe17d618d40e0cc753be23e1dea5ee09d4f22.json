{"ast":null,"code":"var _jsxFileName = \"C:\\\\STUDY\\\\webapp\\\\Library-Management-ITITIU22124\\\\frontend\\\\src\\\\auth\\\\ProtectedRoute.js\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Navigate, useLocation } from 'react-router-dom';\nimport { useAuth } from './AuthContext';\n\n/**\r\n * ProtectedRoute component\r\n * Wraps routes that require authentication or specific roles\r\n * \r\n * Usage:\r\n * <ProtectedRoute>\r\n *   <UserProfilePage />\r\n * </ProtectedRoute>\r\n * \r\n * <ProtectedRoute role=\"ADMIN\">\r\n *   <AdminDashboardPage />\r\n * </ProtectedRoute>\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ProtectedRoute = ({\n  children,\n  role\n}) => {\n  _s();\n  const {\n    isAuthenticated,\n    hasRole,\n    loading\n  } = useAuth();\n  const location = useLocation();\n\n  // Show loading while checking auth state\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Redirect to login if not authenticated\n  if (!isAuthenticated()) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 12\n    }, this);\n  }\n\n  // Check role if specified\n  if (role && !hasRole(role)) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"page\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card\",\n          style: {\n            textAlign: 'center',\n            padding: '60px'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Access Denied\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            style: {\n              color: '#666',\n              marginTop: '10px'\n            },\n            children: \"You don't have permission to access this page.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            style: {\n              marginTop: '20px'\n            },\n            onClick: () => window.history.back(),\n            children: \"Go Back\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this);\n  }\n  return children;\n};\n_s(ProtectedRoute, \"t5DsSLN+nC9h/8QZNbeneMdq1DM=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c = ProtectedRoute;\nexport default ProtectedRoute;\nvar _c;\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"names":["React","Navigate","useLocation","useAuth","jsxDEV","_jsxDEV","ProtectedRoute","children","role","_s","isAuthenticated","hasRole","loading","location","className","fileName","_jsxFileName","lineNumber","columnNumber","to","state","from","replace","style","textAlign","padding","color","marginTop","onClick","window","history","back","_c","$RefreshReg$"],"sources":["C:/STUDY/webapp/Library-Management-ITITIU22124/frontend/src/auth/ProtectedRoute.js"],"sourcesContent":["import React from 'react';\r\nimport { Navigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from './AuthContext';\r\n\r\n/**\r\n * ProtectedRoute component\r\n * Wraps routes that require authentication or specific roles\r\n * \r\n * Usage:\r\n * <ProtectedRoute>\r\n *   <UserProfilePage />\r\n * </ProtectedRoute>\r\n * \r\n * <ProtectedRoute role=\"ADMIN\">\r\n *   <AdminDashboardPage />\r\n * </ProtectedRoute>\r\n */\r\nconst ProtectedRoute = ({ children, role }) => {\r\n  const { isAuthenticated, hasRole, loading } = useAuth();\r\n  const location = useLocation();\r\n\r\n  // Show loading while checking auth state\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading\">\r\n        <div className=\"spinner\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Redirect to login if not authenticated\r\n  if (!isAuthenticated()) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  // Check role if specified\r\n  if (role && !hasRole(role)) {\r\n    return (\r\n      <div className=\"page\">\r\n        <div className=\"container\">\r\n          <div className=\"card\" style={{ textAlign: 'center', padding: '60px' }}>\r\n            <h2>Access Denied</h2>\r\n            <p style={{ color: '#666', marginTop: '10px' }}>\r\n              You don't have permission to access this page.\r\n            </p>\r\n            <button\r\n              className=\"btn btn-primary\"\r\n              style={{ marginTop: '20px' }}\r\n              onClick={() => window.history.back()}\r\n            >\r\n              Go Back\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,SAASC,QAAQ,EAAEC,WAAW,QAAQ,kBAAkB;AACxD,SAASC,OAAO,QAAQ,eAAe;;AAEvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAZA,SAAAC,MAAA,IAAAC,OAAA;AAaA,MAAMC,cAAc,GAAGA,CAAC;EAAEC,QAAQ;EAAEC;AAAK,CAAC,KAAK;EAAAC,EAAA;EAC7C,MAAM;IAAEC,eAAe;IAAEC,OAAO;IAAEC;EAAQ,CAAC,GAAGT,OAAO,CAAC,CAAC;EACvD,MAAMU,QAAQ,GAAGX,WAAW,CAAC,CAAC;;EAE9B;EACA,IAAIU,OAAO,EAAE;IACX,oBACEP,OAAA;MAAKS,SAAS,EAAC,SAAS;MAAAP,QAAA,eACtBF,OAAA;QAAKS,SAAS,EAAC;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAM;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC5B,CAAC;EAEV;;EAEA;EACA,IAAI,CAACR,eAAe,CAAC,CAAC,EAAE;IACtB,oBAAOL,OAAA,CAACJ,QAAQ;MAACkB,EAAE,EAAC,QAAQ;MAACC,KAAK,EAAE;QAAEC,IAAI,EAAER;MAAS,CAAE;MAACS,OAAO;IAAA;MAAAP,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC;EACpE;;EAEA;EACA,IAAIV,IAAI,IAAI,CAACG,OAAO,CAACH,IAAI,CAAC,EAAE;IAC1B,oBACEH,OAAA;MAAKS,SAAS,EAAC,MAAM;MAAAP,QAAA,eACnBF,OAAA;QAAKS,SAAS,EAAC,WAAW;QAAAP,QAAA,eACxBF,OAAA;UAAKS,SAAS,EAAC,MAAM;UAACS,KAAK,EAAE;YAAEC,SAAS,EAAE,QAAQ;YAAEC,OAAO,EAAE;UAAO,CAAE;UAAAlB,QAAA,gBACpEF,OAAA;YAAAE,QAAA,EAAI;UAAa;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC,eACtBb,OAAA;YAAGkB,KAAK,EAAE;cAAEG,KAAK,EAAE,MAAM;cAAEC,SAAS,EAAE;YAAO,CAAE;YAAApB,QAAA,EAAC;UAEhD;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAG,CAAC,eACJb,OAAA;YACES,SAAS,EAAC,iBAAiB;YAC3BS,KAAK,EAAE;cAAEI,SAAS,EAAE;YAAO,CAAE;YAC7BC,OAAO,EAAEA,CAAA,KAAMC,MAAM,CAACC,OAAO,CAACC,IAAI,CAAC,CAAE;YAAAxB,QAAA,EACtC;UAED;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;EAEA,OAAOX,QAAQ;AACjB,CAAC;AAACE,EAAA,CA1CIH,cAAc;EAAA,QAC4BH,OAAO,EACpCD,WAAW;AAAA;AAAA8B,EAAA,GAFxB1B,cAAc;AA4CpB,eAAeA,cAAc;AAAC,IAAA0B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}